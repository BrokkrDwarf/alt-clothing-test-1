<!DOCTYPE html>
<html>
 <head>
   <meta charset="utf-8">
   <title>Alt. Clothing</title>
   <link rel="icon" href="images/alt-logo-favicon.png">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,900" rel="stylesheet">
    <link rel="preconnect" href="https://app.snipcart.com">
    <link rel="preconnect" href="https://cdn.snipcart.com">
    <link rel="stylesheet" href="https://cdn.snipcart.com/themes/v3.0.31/default/snipcart.css" />
    <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="announcement">
    <p class="announcement__text">international shipping available | fees may apply</p>
  </div>
  
    <div class="container">
     <div class="brand">
      <a href="https://twitter.com/altclothing1" target="_blank">
       <img class="twitter" src="images/twitter.png" width="24px" height="24px"/>
      </a>
      <a href="https://www.instagram.com/altclothingofficial/" target="_blank">
       <img class="insta" src="images/insta.png" width="24px" height="24px"/>
      </a>
      <a href="https://www.facebook.com/altclothingofficial" target="_blank">
        <img class="facebook" src="images/facebook.png" width="32px" height="32px"/>
      </a>
      <div class="shopping">
       <a><button class="header__checkout snipcart-checkout">
          <img class="cartbasket" src="images/shopping.png" width="31px" height="31px"/>
          <span class="snipcart-items-count"></span>
        </button></a>
      </div>
      <div class="logo">
      <a href="index">
        <img class="main" src="images/alt-logo-website.png" width="138" height="145"/>
        <img class="glow" src="images/alt-logo-website.png" width="138" height="145"/> 
      </a> </div>
    </div>
  </div>

    <div class="nav-wrapper">
           <div class="center-side"> 
             <div class="nav-link-wrapper">
              <a href="index">Home</a>
            </div>
              
             <div class="nav-link-wrapper">
              <a href="collection">Collection</a>
            </div>
            
             <div class="nav-link-wrapper">
              <a href="lookbook">Lookbook</a>
            </div>

              <div class="nav-link-wrapper">
              <a href= "support">Support</a>
            </div>    
       </div>
    </div>

<div class="search-bar">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
 <form class="example" action="action_page.php">
  <input type="text" placeholder="Search.." name="search">
  <button type="submit"><i class="fa fa-search"></i></button>
 </form>
</div> 

<!-- Container for the image gallery -->
<div class="container1">
  <div class="container2">

    <!-- Full-width images with number text -->
  <div class="slide-wrapper">
    <div class="mySlides1">
      <div class="numbertext"></div>
        <img src="images/WWW-alt-logo-hoodie-2.png" width="600" height="400" onclick="openModal();currentSlide(1)">
    </div>
  
    <div class="mySlides1">
      <div class="numbertext"></div>
        <img src="images/hoodie-model-7.png" width="600" height="400" onclick="openModal();currentSlide(2)">
    </div>
  
    <div class="mySlides1">
      <div class="numbertext"></div>
        <img src="images/hoodie-model-6.png" width="600" height="400" onclick="openModal();currentSlide(3)">
    </div>
  
    <div class="mySlides1">
      <div class="numbertext"></div>
        <img src="images/hoodie-model-5.png" width="600" height="400" onclick="openModal();currentSlide(4)">
    </div>
  
    <div class="mySlides1">
      <div class="numbertext"></div>
        <img src="images/hoodie-model-2.png" width="600" height="400" onclick="openModal();currentSlide(5)">
    </div>
  
    <div class="mySlides1">
      <div class="numbertext"></div>
        <img src="images/hoodie-model-3.png" width="600" height="400" onclick="openModal();currentSlide(6)">
    </div>
  
    <!-- Next and previous buttons -->
    <a class="prev1" onclick="changeSlide(-1, false)">&#10094;</a>
    <a class="next1" onclick="changeSlide(1, false)">&#10095;</a>
  
    <!-- Image text -->
    <div class="caption-container">
      <p id="caption"></p>
    </div>
  
    <!-- Thumbnail images -->
    <div class="row1">
      <div class="column1">
        <img class="demo cursor" src="images/WWW-alt-logo-hoodie-2.png" style="width:100%" onclick="currentSlide(1)">
      </div>
      <div class="column1">
        <img class="demo cursor" src="images/hoodie-model-7.png" style="width:100%" onclick="currentSlide(2)">
      </div>
      <div class="column1">
        <img class="demo cursor" src="images/hoodie-model-6.png" style="width:100%" onclick="currentSlide(3)">
      </div>
      <div class="column1">
        <img class="demo cursor" src="images/hoodie-model-5.png" style="width:100%" onclick="currentSlide(4)">
      </div>
      <div class="column1">
        <img class="demo cursor" src="images/hoodie-model-2.png" style="width:100%" onclick="currentSlide(5)">
      </div>
      <div class="column1">
        <img class="demo cursor" src="images/hoodie-model-3.png" style="width:100%" onclick="currentSlide(6)">
      </div>
   </div>
  </div>
 </div></br></br></br></br>

 <div class="container2">
  <div class="product-wrapper">
    <div class="product-name">
       <h2>Alt logo Core Hoodie - black</h2>
   </div></br>
  <div class="product-description">
      <p1>- The alternative core collection hoodie in black / unixex fit</br></br>

        - Black hoodie with the "Alt." logo embroidered in white on the</br>left breast</br></br>
        
        - Cotton drawstrings with metal aglets to finish</br></br>
        
        - 80/20 cotton to polyester blend for best product quality</br></br>
        
        - Fit is slightly oversized so we do not recommend sizing down or</br> up as it mostly will fit to size</p1>
  </div></br>
    <div class="product-price">
      <h1>£40.00</h1>
    </div></br>
     
  <div class="dropdown-wrapper">
    <div class="dropdown">
      <select id="size" class="sizes" style="width:115px;height:41px">
        <option>small</option>
        >>
        <option>medium</option>
        >>
        <option>large</option>
        >>
        <option>X large</option>
        >>
        <option>XX large</option>
      </select>
    </div>
  </div>
   
   <div class="buy-buttons">
   <button class="btn basket snipcart-add-item" 
   data-item-id="1"
   data-item-price="40.00"
   data-item-name="ALT LOGO CORE HOODIE - BLACK"
   data-item-image="images/WWW-alt-logo-hoodie-2.png"
   data-item-url="https://alt-clothing.co.uk/alt-logo-core-hoodie-black"
   data-item-custom1-name="size"
   data-item-custom1-options="small|medium|large|X large|XX large">ADD TO CART</button>
   </div></br></br>
 
    <div class="sizing-guides1">
     <a href="sizing-guides" target="_blank">Sizing Guides</a>
     </div>
   </div>
 </div>
</div></br></br></br></br></br></br></br></br></br>

 <div class="related-products-wrapper">
    <div class="related-products">
      <h3>Related products</h3></div>
     </div>
   </div></br></br>

<div class="collection-wrapper">
  <div class="related-items-wrapper">

    <div class="collection-item-wrapper">
      <div class="collection-img-background"></div>
  
       <div class="img-text-wrapper">
          <div class="logo-wrapper">
            <a href="alt-logo-core-hoodie-white">
              <img src="images/alt-logo-hoodie-1.png" width="338" height="225">
              <img class="Sirv image-hover" src="images/hoodie-model-1.png" width="338" height="225">
            </div>
    
       <div class="subtitle1">
         </br> Alt Logo Core Hoodie ¬ White</a>
         </div>
         <div class="price2">
        </br> £40.00 </br></br></br></br>
       </div>
      </div>
    </div>
 
    <div class="collection-item-wrapper">
      <div class="collection-img-background"></div>
    
       <div class="img-text-wrapper">
          <div class="logo-wrapper">
            <a href="alt-logo-core-tee-black">
              <img src="images/alt-t-shirt-3.png" width="338" height="225">
              <img class="Sirv image-hover" src="images/image_unavailable.png" width="338" height="225">
            </div>
    
       <div class="subtitle1">
         </br> Alt Logo Core Tee ¬ Black</a>
         </div>
         <div class="price2">
        </br> £20.00 </br></br></br></br>
       </div>
      </div>
    </div>
    
     <div class="collection-item-wrapper">
      <div class="collection-img-background"></div>
    
       <div class="img-text-wrapper">
          <div class="logo-wrapper">
            <a href="alt-logo-core-tee-white">
              <img src="images/alt-t-shirt-4.png" width="338" height="225">
              <img class="Sirv image-hover" src="images/image_unavailable.png" width="338" height="225">
            </div>
    
       <div class="subtitle1">
         </br> Alt Logo Core Tee ¬ White</a>
         </div>
         <div class="price2">
        </br> £20.00 </br></br></br></br>
       </div>
      </div>
    </div>

          <div class="collection-item-wrapper">
            <div class="collection-img-background"></div>
        
             <div class="img-text-wrapper">
                <div class="logo-wrapper">
                  <a href="alt-3d-logo-tee-black">
                    <img src="images/alt-t-shirt-1.png" width="338" height="225">
                    <img class="Sirv image-hover" src="images/image_unavailable.png" width="338" height="225">
                  </div>
          
             <div class="subtitle1">
               </br> Alt 3D Logo Tee ¬ Black</a>
               </div>
               <div class="price2">
              </br> £20.00 </br></br></br></br>
             </div>
            </div>
          </div>
    
      <div class="collection-item-wrapper">
        <div class="collection-img-background"></div>
    
         <div class="img-text-wrapper">
            <div class="logo-wrapper">
              <a href="the-change-logo-tee-black">
                <img src="images/be-the-change-t-shirt-1.png" width="338" height="225">
                <img class="Sirv image-hover" src="images/image_unavailable.png" width="338" height="225">
              </div>
      
         <div class="subtitle1">
           </br> The Change Logo Tee ¬ Black</a>
           </div>
           <div class="price2">
          </br> £20.00 </br></br></br></br>
         </div>
        </div>
      </div>
</div>

<footer>
  <div class="footer-wrapper">
  <div class="other-stuff">
   <p><a href= "support">Refund Policy</a><br>
    <a href="sizing-guides" target="_blank">Size Guides</a></br>
    <a href="mailto:alt.clothing21@gmail.com">Contact Us</a></p>
    <a href="all">All Products</a></p>
 </div>
<div class= "copyright-wrapper">
  <div class="copyright">
  <p> <a href="https://www.freeprivacypolicy.com/live/a77db23f-1ad5-4c87-a26b-9998c2a94eb2" target="_blank"> Privacy Policy</a> | 
   <a href="https://www.termsandconditionsgenerator.com/live.php?token=Xrp9fBNsDrJBcaVLVRTAP6H0FADlxTz5" target="_blank">Terms and Conditions</a></br>
        Copyright © Alt. Clothing 2021 <br>
        Website Developed by Lucas Good</p>
       <div class="credit-cards">
         <i class="fa fa-credit-card" style="font-size:25px;color:rgb(255, 255, 255)"></i>
         <i class="fa fa-cc-visa" style="font-size:25px;color:rgb(255, 255, 255)"></i>
         <i class="fa fa-cc-mastercard" style="font-size:25px;color:rgb(255, 255, 255)"></i>
         <i class="fa fa-cc-paypal" style="font-size:25px;color:rgb(255, 255, 255)"></i>
        </div>
       </div>
     </div>
   </div>
   <div class="socials">
    <a href="https://www.facebook.com/altclothingofficial" target="_blank">
    <i class="fa fa-facebook" style="font-size:20px;color:rgb(255, 255, 255)"></i></a>
    <a href="https://www.youtube.com/channel/UCakqlbbcAn3LnIfNaJsrm9Q" target="_blank">
    <i class="fa fa-youtube-play" style="font-size:20px;color:rgb(255, 255, 255)"></i></a>
    <a href="https://www.instagram.com/altclothingofficial/" target="_blank">
    <i class="fa fa-instagram" style="font-size:20px;color:rgb(255, 255, 255)"></i></a>
    <a href="https://twitter.com/altclothing1" target="_blank">
    <i class="fa fa-twitter" style="font-size:20px;color:rgb(255, 255, 255)"></i></a>
  </div>
  <button onclick="topFunction()" id="myBtn" title="Go to top">^</button>
  <div class="mini-logo">
   <img src="images/alt-logo-website.png" width="90" height="93">
  </div>
 </footer>

     <div id="myModal" class="modal">
      <span class="close cursor" onclick="closeModal()">&times;</span>
      <div class="modal-content">
    
        <div class="mySlides2">
          <div class="numbertext"></div>
          <img src="images/WWW-alt-logo-hoodie-2.png" style="width:100%">
        </div>
    
        <div class="mySlides2">
          <div class="numbertext"></div>
          <img src="images/hoodie-model-7.png" style="width:100%">
        </div>
    
        <div class="mySlides2">
          <div class="numbertext"></div>
          <img src="images/hoodie-model-6.png" style="width:100%">
        </div>
    
        <div class="mySlides2">
          <div class="numbertext"></div>
          <img src="images/hoodie-model-5.png" style="width:100%">
        </div>

        <div class="mySlides2">
          <div class="numbertext"></div>
          <img src="images/hoodie-model-2.png" style="width:100%">
        </div>

        <div class="mySlides2">
          <div class="numbertext"></div>
          <img src="images/hoodie-model-3.png" style="width:100%">
        </div>
      </div>
      
        <!-- Next/previous controls -->
        <a class="prev3" onclick="changeSlide(-1, true)">&#10094;</a>
        <a class="next3" onclick="changeSlide(1, true)">&#10095;</a>
    
        <!-- Caption text -->
        <div class="caption-container">
          <p id="caption"></p>
        </div>
    
        <!-- Thumbnail image controls -->
        <div class="column3">
          <img class="demo" src="images/WWW-alt-logo-hoodie-2.png" width="150" height="100" onclick="currentSlide(1)">
        </div>
    
        <div class="column3">
          <img class="demo" src="images/hoodie-model-7.png" width="150" height="100" onclick="currentSlide(2)">
        </div>
    
        <div class="column3">
          <img class="demo" src="images/hoodie-model-6.png" width="150" height="100" onclick="currentSlide(3)">
        </div>
    
        <div class="column3">
          <img class="demo" src="images/hoodie-model-5.png" width="150" height="100" onclick="currentSlide(4)">
        </div>

        <div class="column3">
          <img class="demo" src="images/hoodie-model-2.png" width="150" height="100" onclick="currentSlide(5)">
        </div>

        <div class="column3">
          <img class="demo" src="images/hoodie-model-3.png" width="150" height="100" onclick="currentSlide(6)">
        </div>
      </div>
    </div>
  </div>


<script>
  // Get the payment session from Snipcart
  const fetchPaymentSession = async () => {
    const publicToken = new URLSearchParams(window.location.search).get('ZjNjOGMzMDctODE0Mi00MDM2LWI5ZGQtZTkyY2M4NTBjYWJjNjM3NjYxMjE5ODk1MTczNTUw')
    try {
      const response = await axios
        .get(`https://payment.snipcart.com/api/public/custom-payment-gateway/payment-session?publicToken=${publicToken}`)
      paymentSession = response.data
      currency = paymentSession.invoice.currency
    } catch (e) {
      console.error(e)
    }
  }
    // Creates the Google Pay Request Data
  // This is needed for the Payment Request Api
  const createGooglePayRequestData = () => ({
    environment: 'TEST',
    apiVersion: 2,
    apiVersionMinor: 0,
    merchantInfo: {
      // A merchant ID is available after approval by Google.
      // 'merchantId':'12345678901234567890',
      merchantName: 'Example Merchant'
    },
    allowedPaymentMethods: [{
      type: 'CARD',
      parameters: {
        allowedAuthMethods: ["PAN_ONLY", "CRYPTOGRAM_3DS"],
        allowedCardNetworks: ["AMEX", "DISCOVER", "INTERAC", "JCB", "MASTERCARD", "VISA"]
      },
      tokenizationSpecification: {
        type: 'PAYMENT_GATEWAY',
        // Check with your payment gateway on the parameters to pass.
        // @see {@link https://developers.google.com/pay/api/web/reference/request-objects#gateway}
        parameters: {
          'gateway': 'example',
          'gatewayMerchantId': 'exampleGatewayMerchantId'
        }
      }
    }]
  })
    // Create the payment details
    const createPaymentDetails = () => ({
    total: {
      label: 'TOTAL',
      amount: {
        currency: currency,
        value: paymentSession.invoice.amount
      }
    },
    displayItems: paymentSession.invoice.items.map(i => {
      const isItem = i.type !== 'Discount' && i.type !== 'Tax' && i.type !== 'Shipping' // Filter items from discount, tax, and shipping
      const label = isItem ? `${i.name} x ${i.quantity}` : i.name // Add the quantity if needed
      return {
        label,
        amount: {
          value: i.amount,
          currency
        }
      }
    })
  })
    // Create the payment request (Using the Payment Request API)
    const createPaymentRequest = () => {
    const supportedMethods = [
      { supportedMethods: 'https://google.com/pay', data: createGooglePayRequestData() },
    ]

    paymentDetails = createPaymentDetails()

    const options = {
      requestPayerEmail: true,
      requestPayerName: true
    }
    paymentRequest = new PaymentRequest(
      supportedMethods,
      paymentDetails,
      options
    )
  }
    // Add the buy button Event Listener
    const bindBuyButton = () => {
    paymentRequest.canMakePayment() // Validate the payment request
      .then(function (result) {
        if (result) {
          document.getElementById('pay').addEventListener('click', onBuyClicked);
        }
      })
      .catch(function (err) {
        console.log(err)
      })
  }
  // Add the event listener on the Buy button
  const onBuyClicked = async () => {
    try {
      const paymentRes = await paymentRequest.show()
      await handlePayment(paymentRes)
    } catch (e) {
      console.log(e)
    }
  }
  // Payment completed callback
  const handlePayment = async (paymentRes) => {
    try {
      const res = await axios.post(`/api/confirm-payment?sessionId=${paymentSession.id}`, paymentRes)
      paymentRes.complete('success')
      window.location.href = res.data.returnUrl
    } catch (e) {
      console.error(e)
    }
  }
  async (req, res) => {
  if (req.body && req.body.publicToken) {
    try {
      // Validate the request was made by Snipcart
      await axios.get(`https://payment.snipcart.com/api/public/custom-payment-gateway/validate?publicToken=${req.body.publicToken}`)
      // Return the payment methods
      return res.json([{
        id: 'paymentrequest-custom-gateway',
        name: 'Google pay',
        checkoutUrl: 'https://paymentrequest-custom-gateway.snipcart.vercel.app',
        iconUrl: `https://paymentrequest-custom-gateway.snipcart.vercel.app/google_pay.png`
      }])
    }catch(e){
      // Couldn't validate the request
      console.error(e)
      return res.status(401).send()
    }
  }
  // No publicToken provided. This means the request was NOT made by Snipcart
  return res.status(401).send()
}
async (req, res) => {

// TODO: Validate the request was approved by your payment gateway (in this case Google Pay)

// Parse the gateway payment info to match Snipcart's schema
// This will change depending on the payment gateway you choose
const paymentSessionId = req.query.sessionId
const data = {
  paymentSessionId,
  state: 'processed',
  transactionId: req.body.requestId,
  instructions: 'Your payment will appear on your statement in the coming days',
  links: {
    refunds: `https://paymentrequest-custom-gateway.snipcart.vercel.app/api/refund?transactionId=${req.body.requestId}`
  },
}

// Add authentification
// This is the secret API key created in Snipcart's merchant dashboar
const options = {
  headers: {
    Authorization: 'Bearer <YOUR_SECRET_API_KEY>'
  }
}

try{
  // Confirm payment with Snipcart
  const resp = await axios.post(`${process.env.PAYMENT_URL}/api/private/custom-payment-gateway/payment`,data, options)

  // ReturnUrl will redirect the user to the Order confirmation page of Snipcart
  return res.json({
    returnUrl: resp.data.returnUrl
  })
}catch(e){
  console.error(e)
}

return res.status(500).send()
}
 </script>
<script src="dropdown.js"></script>
<script src="back-to-top.js"></script>
<script src="product-slideshows.js"></script>
<script async src="https://cdn.snipcart.com/themes/v3.0.31/default/snipcart.js"></script>
<div hidden id="snipcart" data-api-key="YzYzMmYxNTYtNzU1MS00MjQ1LWFiZDgtM2VkODVkZDU4MzFmNjM3NTA1ODAzMDM3OTc1MTI5" data-config-modal-style="side"></div>
</body>
</html>